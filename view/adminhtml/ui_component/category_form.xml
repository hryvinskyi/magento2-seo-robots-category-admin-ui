<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2026. All rights reserved.
  ~ @author: Volodymyr Hryvinskyi <mailto:volodymyr@hryvinskyi.com>
  -->

<form xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Ui:etc/ui_configuration.xsd">
    <fieldset name="search_engine_optimization">
        <field name="robots_meta_tag" sortOrder="1000" formElement="multiselect" component="Hryvinskyi_SeoRobotsAdminUi/js/form/element/directive-multiselect">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="source" xsi:type="string">category</item>
                </item>
            </argument>
            <settings>
                <dataType>text</dataType>
                <label translate="true">Robots Meta Tag Directives</label>
                <dataScope>robots_meta_tag</dataScope>
                <elementTmpl>Hryvinskyi_SeoRobotsAdminUi/form/element/directive-multiselect</elementTmpl>
                <tooltip>
                    <description translate="true">Select multiple directives to control search engine indexing for this category page. Directives will be combined (e.g., selecting NOINDEX and NOFOLLOW creates "NOINDEX,NOFOLLOW"). Configure default settings at Stores > Configuration > Hryvinskyi Extensions -> SEO > Meta Robots > Robots Category</description>
                </tooltip>
                <validation>
                    <rule name="required-entry" xsi:type="boolean">false</rule>
                </validation>
            </settings>
            <formElements>
                <multiselect>
                    <settings>
                        <options class="Hryvinskyi\SeoRobotsCategoryAdminUi\Model\Category\Attribute\Source\DirectiveList"/>
                    </settings>
                </multiselect>
            </formElements>
        </field>

        <field name="apply_robots_to_products" sortOrder="1001" formElement="checkbox">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="source" xsi:type="string">category</item>
                    <item name="default" xsi:type="number">0</item>
                </item>
            </argument>
            <settings>
                <dataType>boolean</dataType>
                <label translate="true">Apply Robots to Category Products</label>
                <dataScope>apply_robots_to_products</dataScope>
                <tooltip>
                    <description translate="true">Enable to apply robots meta tag to all products in this category. Configure default settings at Stores > Configuration > Hryvinskyi Extensions -> SEO > Meta Robots > Robots Category</description>
                </tooltip>
            </settings>
            <formElements>
                <checkbox>
                    <settings>
                        <valueMap>
                            <map name="false" xsi:type="number">0</map>
                            <map name="true" xsi:type="number">1</map>
                        </valueMap>
                        <prefer>toggle</prefer>
                    </settings>
                </checkbox>
            </formElements>
        </field>

        <field name="product_robots_meta_tag" sortOrder="1002" formElement="multiselect" component="Hryvinskyi_SeoRobotsAdminUi/js/form/element/directive-multiselect">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="source" xsi:type="string">category</item>
                </item>
            </argument>
            <settings>
                <dataType>text</dataType>
                <label translate="true">Robots Directives for Category Products</label>
                <dataScope>product_robots_meta_tag</dataScope>
                <elementTmpl>Hryvinskyi_SeoRobotsAdminUi/form/element/directive-multiselect</elementTmpl>
                <tooltip>
                    <description translate="true">Select multiple directives for products in this category (only applies if "Apply Robots to Category Products" is enabled). Choose "Use Category Robots" to inherit from category's directive settings. Configure defaults at Stores > Configuration > Hryvinskyi Extensions -> SEO > Meta Robots > Robots Category</description>
                </tooltip>
                <validation>
                    <rule name="required-entry" xsi:type="boolean">false</rule>
                </validation>
                <imports>
                    <link name="visible">ns = ${ $.ns }, index = apply_robots_to_products:checked</link>
                </imports>
            </settings>
            <formElements>
                <multiselect>
                    <settings>
                        <options class="Hryvinskyi\SeoRobotsCategoryAdminUi\Model\Category\Attribute\Source\ProductDirectiveList"/>
                    </settings>
                </multiselect>
            </formElements>
        </field>
    </fieldset>
</form>
